let m=document.querySelectorAll(".non"),S=document.querySelector(".cu").getAttribute("name");m.forEach(s=>{s.innerHTML===S&&s.classList.add("bg")});if(document.querySelector("#genre")){let s=["Fiction","Poetry","Nonfiction","Drama","Romance","Mystery","Thriller","Science Fiction","Fantacies","Horror","History"],d=document.querySelector("#genre"),i=document.querySelector(".dropsHolder");d.addEventListener("input",()=>{document.querySelectorAll(".drops").forEach(r=>{let u=r.innerHTML.toUpperCase(),y=d.value.toUpperCase();u.indexOf(y)==-1?r.style.display="none":r.style.display="block"})}),d.addEventListener("blur",()=>{document.querySelectorAll(".drops").forEach(r=>{r.addEventListener("click",()=>{document.querySelector("#genre").value=r.innerHTML,document.querySelector(".dropsHolder").innerHTML=""})}),setTimeout(()=>{document.querySelector(".dropsHolder").innerHTML=""},300)}),d.addEventListener("focus",()=>{document.querySelectorAll(".drops")&&document.querySelectorAll(".drops").forEach(r=>{r.remove()}),s.forEach(r=>{let u=document.createElement("p");u.className="drops",u.innerHTML=r,i.append(u)}),document.querySelectorAll(".drops")&&document.querySelectorAll(".drops").forEach(r=>{r.addEventListener("click",()=>{document.querySelector("#genre").value=r.innerHTML,document.querySelector(".dropsHolder").innerHTML=""})})})}if(document.querySelectorAll(".book-entry")){let a=function(e){let o=document.querySelectorAll(".tf");o.forEach(l=>{l.addEventListener("click",()=>{o.forEach(t=>{t.classList.remove("now")}),l.classList.add("now");let n=document.querySelectorAll(".book-entry-norms");if(l.innerHTML==="All"){for(let t=0;t<n.length;t++){const c=n[t];c.style.display="none"}for(let t=0;t<12;t++){const c=n[t];c.style.display="block"}}else n.forEach(t=>{t.querySelector(".genre").innerHTML===l.innerHTML?t.style.display="block":t.style.display="none"})})})};var b=a;let s=document.querySelectorAll(".book-entry");for(let e=12;e<s.length;e++){const o=s[e];o.style.display="none"}let d=document.querySelectorAll(".book-entry-norms");for(let e=12;e<d.length;e++){const o=d[e];o.style.display="none"}let i=document.querySelector("#u-more");i.addEventListener("click",function(){let e=document.querySelectorAll(".book-entry-norms");for(let o=0;o<e.length;o++){const l=e[o];l.style.display="block"}i.style.display="none",document.querySelector("#u-less").style.display="block"});let r=document.querySelector("#u-less");r.addEventListener("click",function(){let e=document.querySelectorAll(".book-entry-norms");for(let o=12;o<e.length;o++){const l=e[o];l.style.display="none"}r.style.display="none",document.querySelector("#u-more").style.display="block"});let u=document.querySelectorAll("input")[1];document.querySelectorAll(".delete").forEach(e=>{e.addEventListener("click",()=>{document.querySelector("#overlay").style.display="block",document.querySelector("#popup-container").style.display="block",document.querySelector("#popup-container").querySelector("h2").innerHTML="Are You Sure",document.querySelector("#popup-input").style.display="none",document.querySelector(".cancel").addEventListener("click",function(o){document.querySelector("#overlay").style.display="none",document.querySelector("#popup-container").style.display="none"}),document.querySelector(".proceed").addEventListener("click",()=>{let o=e.getAttribute("ct");e.getAttribute("title"),fetch(`/delete_book/${o}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u.value}}).then(l=>{if(!l.ok)throw new Error("Network response was not ok");return l.json()}).then(l=>{e.parentElement.parentElement.remove(),document.querySelector(".alert2").style.display="block",document.querySelector(".alert2").innerHTML=l.message,document.querySelector("#overlay").style.display="none",document.querySelector("#popup-container").style.display="none",setTimeout(()=>{document.querySelector(".alert2").style.display="none"},2100);let n;e.id=="user"?n=document.querySelectorAll(".book-entry-norms"):n=document.querySelectorAll(".book-entry");for(let t=0;t<n.length;t++){const c=n[t];if(c.style.display==="none"){c.style.display="block";break}}}),document.querySelector(".alert")&&setTimeout(()=>{document.querySelector(".alert").style.display="none"},2100)})})}),document.querySelectorAll(".delete-norms").forEach(e=>{e.addEventListener("click",()=>{e.getAttribute("ct"),e.getAttribute("user_id"),document.querySelector("#overlay").style.display="block",document.querySelector("#popup-container").style.display="block",document.querySelector("#popup-input").focus(),document.querySelector(".cancel").addEventListener("click",function(o){document.querySelector("#overlay").style.display="none",document.querySelector("#popup-container").style.display="none"}),document.querySelector("#popup-input").style.display="block",document.querySelector(".proceed").addEventListener("click",()=>{let o=document.querySelector("#popup-input").value;if(o.length==" ")document.querySelector(".err").innerHTML="Enter A value";else{let n={book_id:e.getAttribute("ct"),reason:o};fetch("/removebook",{method:"POST",headers:{"X-CSRF-TOKEN":u.value},body:JSON.stringify(n)}).then(t=>{if(!t.ok)throw new Error("Network response was not ok");t.json()}).then(t=>{document.querySelector("#overlay").style.display="none",document.querySelector("#popup-container").style.display="none";let c=document.createElement("div");c.className="blur";const p=e.parentElement.parentElement;document.querySelector("#popup-input").value=" ",p.append(c),e.style.display="none",p.querySelector(".nice-buttons").style.display="flex"})}})})}),document.querySelectorAll(".restore").forEach(e=>{e.addEventListener("click",()=>{let l={book_id:e.getAttribute("ct")};fetch("/restore_book/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u.value},body:JSON.stringify(l)}).then(n=>{if(!n.ok)throw new Error("Network response was not ok");n.json()}).then(n=>{const t=e.parentElement.parentElement;t.querySelector(".blur").remove(),t.querySelector(".book-buttons").style.display="flex",t.querySelector(".delete-norms").style.display="block",t.querySelector(".nice-buttons").style.display="none"})})}),a()}
